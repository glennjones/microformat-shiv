/*
   microformat-shiv - v0.3.4
   Built: 2015-07-02 03:07 - http://microformat-shiv.com
   Copyright (c) 2015 Glenn Jones
   Licensed MIT 
*/



!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Microformats=b()}(this,function(){var a={};a.version="0.3.4",a.livingStandard="2015-06-30T12:45:50Z",a.Parser=function(){this.rootPrefix="h-",this.propertyPrefixes=["p-","dt-","u-","e-"]},a.maps=a.maps?a.maps:{},a.rels=a.rels?a.rels:{},a.Parser.prototype={init:function(){this.rootNode=null,this.document=null,this.options={baseUrl:"",filters:[],textFormat:"whitespacetrimmed",dateFormat:"auto"},this.rootID=0,this.errors=[]},get:function(a){var b,c={},d=[];if(this.init(),this.hasDOMContext(a)){if(this.options.filters.length>0){var e=this.findFilterNodes(this.rootNode,this.options.filters);d=this.walkRoot(e)}else d=this.walkRoot(this.rootNode);c.items=d,this.findRels&&(b=this.findRels(this.rootNode),c.rels=b.rels,c["rel-urls"]=b["rel-urls"],b.alternate&&(c.alternates=b.alternate)),this.clearUpDom(this.rootNode)}return this.errors.length>0?this.formatError():c},hasDOMContext:function(b){var c,d;if(this.mergeOptions(b),b.node&&(this.rootNode=b.node,9===this.rootNode.nodeType?(this.document=this.rootNode,this.rootNode=a.domUtils.querySelector(this.rootNode,"html")):this.document=a.domUtils.ownerDocument(this.rootNode)),!this.rootNode&&document&&(this.rootNode=a.domUtils.querySelector(document,"html"),this.document=document),this.rootNode&&this.document){this.addIncludes&&this.addIncludes(this.document),!b.baseUrl&&this.document&&this.document.location&&(this.options.baseUrl=this.document.location.href);var c=this.rootNode.querySelector("base");c&&(d=a.domUtils.getAttribute(c,"href"),d&&(this.options.baseUrl=d))}else this.errors.push("No options.node was provided and no global document object could be found.");return this.rootNode&&this.document},formatError:function(){return{items:[],rels:{},"rel-urls":{},errors:this.errors}},add:function(b){b&&b.name&&(a.maps[name]=JSON.parser(JSON.stringify(b)))},findFilterNodes:function(b,c){var d=this.document.createElement("div"),e=this.findRootNodes(b),f=0,g=0,h=0;if(e)for(f=e.length;f>g;){for(h=c.length;h--;)if(this.getMapping(c[h])){var i=this.getMapping(c[h]).root;c.push(i)}for(h=c.length;h--;)if(a.domUtils.hasAttributeValue(e[g],"class",c[h])){var j=a.domUtils.clone(e[g]);a.domUtils.appendChild(d,j);break}g++}return d},count:function(b){function c(a,b){h[a]?h[a]=h[a]+b:h[a]=b}var d,e,f,g,h={};if(!b||!b.node)return{errors:["No options.node to parser microformats from"]};for(d=this.findRootNodes(b.node),g=d.length;g--;)for(e=a.domUtils.getAttributeList(d[g],"class"),f=e.length;f--;){a.utils.startWith(e[f],"h-")&&c(e[f],1);for(var i in a.maps)a.maps[i].root===e[f]&&-1===e.indexOf(i)&&c(i,1)}return h},isMicroformat:function(a){var b;return a?(b=this.getUfClassNames(a),b.root.length>0):!1},shouldInclude:function(b,c){var d;if(a.utils.isArray(c)&&c.length>0){for(d=c.length;d--;)if(b.type[0]===c[d])return!0;return!1}return!0},findChildItems:function(b,c){var d,e,f,g,h,i=[],j=[];if(d=this.findRootNodes(b,!0),d.length>0)for(f=d.length,e=0;f>e;){var k=this.getUfClassNames(d[e],c);if(k.root.length>0&&0===k.properties.length)for(j=this.walkTree(d[e],!0),h=j.length,g=0;h>g;)j[g]&&a.utils.hasProperties(j[g].properties)&&i.push(j[g]),g++;e++}return i},findRootNodes:function(b,c){var d,e,f,g,h,i=null,j=[],k=[];for(h in a.maps)a.maps.hasOwnProperty(h)&&k.push(a.maps[h].root);for(c=c?c:!1,i=c?a.domUtils.getNodesByAttribute(b,"class"):a.domUtils.getNodesByAttribute(b,"class"),e=0,f=i.length;f>e;){for(d=a.domUtils.getAttributeList(i[e],"class"),g=d.length;g--;){if(k.indexOf(d[g])>-1){j.push(i[e]);break}if(a.utils.startWith(d[g],"h-")){j.push(i[e]);break}}e++}return j},walkRoot:function(a){var b,c=this,d=[],e=[];if(b=this.getUfClassNames(a),b&&b.root.length>0)d=this.walkTree(a),d.length>0&&(e=e.concat(d));else if(a&&a.children&&a.children.length>0&&this.findRootNodes(a,!0).length>-1)for(var f=0;f<a.children.length;f++){var g=a.children[f];d=c.walkRoot(g),d.length>0&&(e=e.concat(d))}return e},walkTree:function(a){var b,c,d,e=[];return b=this.getUfClassNames(a),b&&b.root.length&&b.root.length>0&&(this.rootID++,d=this.rootID,c=this.createUfObject(b.root),this.walkChildren(a,c,b.root,d,b),this.impliedRules&&this.impliedRules(a,c,b),e.push(c)),e},walkChildren:function(b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p=this;for(m=0,n=b.children.length;n>m;){o=b.children[m];var q=p.getUfClassNames(o,d);if(q.root.length>0&&q.properties.length>0&&!o.addedAsRoot){for(g=p.createUfObject(q.root,a.text.parse(this.document,o,p.options.textFormat)),f&&1===f.root.length&&1===f.properties.length&&p.impliedValueRule&&(c=p.impliedValueRule(c,f.properties[0],q.properties[0],i)),j=p.removePropPrefix(q.properties[0]),c.properties[j]?c.properties[j].push(g):c.properties[j]=[g],p.rootID++,o.addedAsRoot=!0,l=0,k=g.type.length,h=p.rootID;k>l;)p.walkChildren(o,g,g.type,h,q),l++;this.impliedRules&&p.impliedRules(o,g,q)}if(0===q.root.length&&q.properties.length>0){for(l=0,k=q.properties.length;k>l;)i=p.getValue(o,q.properties[l],c),j=p.removePropPrefix(q.properties[l]),f&&1===f.root.length&&1===f.properties.length&&p.impliedValueRule&&(c=p.impliedValueRule(c,f.properties[0],q.properties[l],i)),""===i||p.hasRootID(o,e,j)||(c.properties[j]?c.properties[j].push(i):c.properties[j]=[i],p.appendRootID(o,e,j)),l++;p.walkChildren(o,c,d,e,q)}if(0===q.root.length&&0===q.properties.length&&p.walkChildren(o,c,d,e,q),q.root.length>0&&0===q.properties.length){for(g=p.createUfObject(q.root,a.text.parse(this.document,o,p.options.textFormat)),c.children||(c.children=[]),p.hasRootID(o,e,"child-root")||(c.children.push(g),p.appendRootID(o,e,"child-root"),p.rootID++),l=0,k=g.type.length,h=p.rootID;k>l;)p.walkChildren(o,g,g.type,h,q),l++;p.impliedRules&&p.impliedRules(o,g,q)}m++}},getValue:function(b,c,d){var e="";return a.utils.startWith(c,"p-")&&(e=this.getPValue(b,!0)),a.utils.startWith(c,"e-")&&(e=this.getEValue(b)),a.utils.startWith(c,"u-")&&(e=this.getUValue(b,!0)),a.utils.startWith(c,"dt-")&&(e=this.getDTValue(b,c,d,!0)),e},getPValue:function(b,c){var d="";return c&&(d=this.getValueClass(b,"p")),!d&&c&&(d=this.getValueTitle(b)),d||(d=a.domUtils.getAttrValFromTagList(b,["abbr"],"title")),d||(d=a.domUtils.getAttrValFromTagList(b,["data"],"value")),("br"===b.name||"hr"===b.name)&&(d=""),d||(d=a.domUtils.getAttrValFromTagList(b,["img","area"],"alt")),d||(d=a.text.parse(this.document,b,this.options.textFormat)),d?d:""},getEValue:function(b){function c(b,c,d){var e,f,g;for(f=a.domUtils.getNodesByAttribute(b,c),e=f.length;e--;)try{g=a.domUtils.getAttribute(f[e],c),g&&""!==g&&""!==d&&-1===g.indexOf(":")&&(g=a.domUtils.resolveUrl(g,d),a.domUtils.setAttribute(f[e],c,g))}catch(h){}}var d={value:"",html:""};return c(b,"src",this.options.baseUrl),c(b,"href",this.options.baseUrl),d.value=a.text.parse(this.document,b,this.options.textFormat),d.html=a.html.parse(b),d},getUValue:function(b,c){var d="";return c&&(d=this.getValueClass(b,"u")),!d&&c&&(d=this.getValueTitle(b)),d||(d=a.domUtils.getAttrValFromTagList(b,["a","area"],"href")),d||(d=a.domUtils.getAttrValFromTagList(b,["img"],"src")),d||(d=a.domUtils.getAttrValFromTagList(b,["object"],"data")),d&&""!==d&&-1===d.indexOf(":")&&(d=a.domUtils.resolveUrl(d,this.options.baseUrl)),d||(d=a.domUtils.getAttrValFromTagList(b,["abbr"],"title")),d||(d=a.domUtils.getAttrValFromTagList(b,["data"],"value")),d||(d=a.text.parse(this.document,b,this.options.textFormat)),d?d:""},getDTValue:function(b,c,d,e){var f="";return e&&(f=this.getValueClass(b,"dt")),!f&&e&&(f=this.getValueTitle(b)),f||(f=a.domUtils.getAttrValFromTagList(b,["time","ins","del"],"datetime")),f||(f=a.domUtils.getAttrValFromTagList(b,["abbr"],"title")),f||(f=a.domUtils.getAttrValFromTagList(b,["data"],"value")),f||(f=a.text.parse(this.document,b,this.options.textFormat)),f?a.dates.isDuration(f)?f:a.dates.isTime(f)?(d&&d.times.push([c,a.dates.parseAmPmTime(f,this.options.dateFormat)]),a.dates.parseAmPmTime(f,this.options.dateFormat)):(d&&d.dates.push([c,new a.ISODate(f).toString(this.options.dateFormat)]),new a.ISODate(f).toString(this.options.dateFormat)):""},appendRootID:function(b,c,d){if(this.hasRootID(b,c,d)===!1){var e=[];a.domUtils.hasAttribute(b,"rootids")&&(e=a.domUtils.getAttributeList(b,"rootids")),e.push("id"+c+"-"+d),a.domUtils.setAttribute(b,"rootids",e.join(" "))}},hasRootID:function(b,c,d){var e=[];return a.domUtils.hasAttribute(b,"rootids")?(e=a.domUtils.getAttributeList(b,"rootids"),e.indexOf("id"+c+"-"+d)>-1):!1},getValueClass:function(b,c){var d,e,f,g=this,h=[];for(e=0,f=b.children.length;f>e;){d=b.children[e];var i=null;if(a.domUtils.hasAttributeValue(d,"class","value")){switch(c){case"p":i=g.getPValue(d,!1);break;case"u":i=g.getUValue(d,!1);break;case"dt":i=g.getDTValue(d,"",null,!1)}i&&h.push(a.utils.trim(i))}e++}return h.length>0?"p"===c?a.text.parseText(this.document,h.join(" "),this.options.textFormat):"u"===c?h.join(""):"dt"===c?a.dates.concatFragments(h,this.options.dateFormat).toString(this.options.dateFormat):void 0:null},getValueTitle:function(b){var c,d,e,f=[];for(c=a.domUtils.getNodesByAttributeValue(b,"class","value-title"),e=0,d=c.length;d>e;)a.domUtils.hasAttribute(c[e],"title")&&f.push(a.domUtils.getAttribute(c[e],"title")),e++;return f.join("")},hasHClass:function(a){var b=this.getUfClassNames(a);return b.root&&b.root.length>0?!0:!1},getUfClassNames:function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this,s={root:[],properties:[]};if(d=a.domUtils.getAttribute(b,"class"))for(f=d.split(" "),i=0,h=f.length;h>i;){for(g=a.utils.trim(f[i]),a.utils.startWith(g,r.rootPrefix)&&s.root.push(g),j=r.propertyPrefixes.length;j--;)a.utils.startWith(g,r.propertyPrefixes[j])&&s.properties.push(g);for(e in a.maps)a.maps.hasOwnProperty(e)&&a.maps[e].root===g&&-1===s.root.indexOf(e)&&(a.maps[e].subTree&&r.isSubTreeRoot(b,a.maps[e],f)===!1?s.properties.push("p-"+a.maps[e].root):s.root.push(e));if(c)for(var t=0;t<c.length;t++)if(q=c[t],l=r.getMapping(q))for(e in l.properties)if(l.properties.hasOwnProperty(e)&&(m=l.properties[e],n=m.map?m.map:"p-"+e,e===g))if(m.uf){for(k=0;h>k;)o=r.getV2RootName(f[k]),m.uf.indexOf(o)>-1&&-1===s.root.indexOf(o)&&s.root.push(o),k++;-1===s.properties.indexOf(n)&&s.properties.push(n)}else-1===s.properties.indexOf(n)&&s.properties.push(n);i++}if(c)for(var u=0;u<c.length;u++)q=c[u],this.findRelImpied&&(p=this.findRelImpied(b,q),p&&-1===s.properties.indexOf(p)&&s.properties.push(p));return s},getMapping:function(b){var c;for(c in a.maps)if(a.maps[c].root===b||c===b)return a.maps[c];return null},getV2RootName:function(b){var c;for(c in a.maps)if(a.maps[c].root===b)return c;return null},isSubTreeRoot:function(b,c,d){var e,f,g,h;for(e=this.createUfObject(c.name),f=!1,h=0,g=d.length;g>h;){var i=a.utils.trim(d[h]);for(var j in a.maps)if(a.maps.hasOwnProperty(j)&&a.maps[j].root===i&&a.maps[j].root!==c.root){f=!0;break}h++}return this.walkChildren(b,e,c.name,null,null),a.utils.hasProperties(e.properties)&&f===!1?!0:!1},createUfObject:function(b,c){var d={};return c&&a.utils.isOnlyWhiteSpace(c)===!1&&(d.value=c),a.utils.isArray(b)?d.type=b:d.type=[b],d.properties={},d.times=[],d.dates=[],d.altValue=null,d},removePropPrefix:function(b){var c;for(c=this.propertyPrefixes.length;c--;){var d=this.propertyPrefixes[c];a.utils.startWith(b,d)&&(b=b.substr(d.length))}return b},expandURLs:function(b,c){function d(b,d){if(b&&b.length)for(var e=b.length;e--;){var f=b[e].getAttribute(d);0!==f.toLowerCase().indexOf("http")&&b[e].setAttribute(d,a.domUtils.resolveUrl(f,c))}}return b=a.domUtils.clone(b),d(a.domUtils.getNodesByAttribute(b,"href"),"href"),d(a.domUtils.getNodesByAttribute(b,"src"),"src"),b},mergeOptions:function(a){var b;for(b in a)a.hasOwnProperty(b)&&(this.options[b]=a[b])},removeRootIds:function(b){var c,d;for(c=a.domUtils.getNodesByAttribute(b,"rootids"),d=c.length;d--;)a.domUtils.removeAttribute(c[d],"rootids")},clearUpDom:function(a){this.removeIncludes&&this.removeIncludes(a),this.removeRootIds(a)}},a.Parser.prototype.constructor=a.Parser,a.Parser&&(a.Parser.prototype.impliedRules=function(b,c,d){var e,f,g=this;if(c&&c.properties){if(!c.properties.name){e=this.getImpliedProperty(b,["img","area","abbr"],this.getNameAttr);var h=this.options.textFormat;e?c.properties.name=[a.text.parseText(this.document,e,h)]:c.properties.name=[a.text.parse(this.document,b,h)]}c.properties.name&&c.value&&d.root.length>0&&1===d.properties.length&&(c=g.impliedValueRule(c,d.properties[0],"p-name",c.properties.name[0])),c.properties.photo||(e=this.getImpliedProperty(b,["img","object"],this.getPhotoAttr),e&&(e&&""!==e&&""!==this.options.baseUrl&&-1===e.indexOf(":")&&(e=a.domUtils.resolveUrl(e,this.options.baseUrl)),c.properties.photo=[a.utils.trim(e)])),c.properties.url||(e=this.getImpliedProperty(b,["a","area"],this.getURLAttr),e&&(e&&""!==e&&""!==this.options.baseUrl&&-1===e.indexOf(":")&&(e=a.domUtils.resolveUrl(e,this.options.baseUrl)),c.properties.url=[a.utils.trim(e)])),c.properties.url&&d&&1===d.root.length&&1===d.properties.length&&(c=g.impliedValueRule(c,d.properties[0],"u-url",c.properties.url[0]))}c.times.length>0&&c.dates.length>0&&(f=a.dates.dateTimeUnion(c.dates[0][1],c.times[0][1],this.options.dateFormat),c.properties[this.removePropPrefix(c.times[0][0])][0]=f.toString(this.options.dateFormat)),delete c.times,delete c.dates,null!==c.altValue&&(c.value=c.altValue.value),delete c.altValue},a.Parser.prototype.getImpliedProperty=function(b,c,d){var e,f,g=d(b);return g||(e=a.domUtils.isSingleDescendant(b,c),e&&this.hasHClass(e)===!1&&(g=d(e)),b.children.length>0&&(f=a.domUtils.isSingleDescendant(b,c),f&&(e=a.domUtils.isSingleDescendant(f,c),e&&this.hasHClass(e)===!1&&(g=d(e))))),g},a.Parser.prototype.getNameAttr=function(b){var c=a.domUtils.getAttrValFromTagList(b,["img","area"],"alt");return c||(c=a.domUtils.getAttrValFromTagList(b,["abbr"],"title")),c},a.Parser.prototype.getPhotoAttr=function(b){var c=a.domUtils.getAttrValFromTagList(b,["img"],"src");return c||a.domUtils.hasAttributeValue(b,"class","include")!==!1||(c=a.domUtils.getAttrValFromTagList(b,["object"],"data")),c},a.Parser.prototype.getURLAttr=function(b){var c=null;return a.domUtils.hasAttributeValue(b,"class","include")===!1&&(c=a.domUtils.getAttrValFromTagList(b,["a"],"href"),c||(c=a.domUtils.getAttrValFromTagList(b,["area"],"href"))),c},a.Parser.prototype.impliedValueRule=function(b,c,d,e){return b.value&&(a.utils.startWith(c,"p-")&&"p-name"===d&&(b.altValue={name:d,value:e}),a.utils.startWith(c,"e-")&&(b.altValue={name:d,value:e}),a.utils.startWith(c,"u-")&&(b.altValue={name:d,value:e})),b}),a.Parser&&(a.Parser.prototype.addIncludes=function(a){this.addAttributeIncludes(a,"itemref"),this.addAttributeIncludes(a,"headers"),this.addClassIncludes(a)},a.Parser.prototype.addAttributeIncludes=function(b,c){var d,e,f,g,h,i;for(d=a.domUtils.getNodesByAttribute(b,c),g=0,f=d.length;f>g;){if(e=a.domUtils.getAttributeList(d[g],c))for(h=0,i=e.length;i>h;)this.apppendInclude(d[g],e[h]),h++;g++}},a.Parser.prototype.addClassIncludes=function(b){var c,d,e,f=0;for(d=a.domUtils.getNodesByAttributeValue(b,"class","include"),e=d.length;e>f;)c=a.domUtils.getAttrValFromTagList(d[f],["a"],"href"),c||(c=a.domUtils.getAttrValFromTagList(d[f],["object"],"data")),this.apppendInclude(d[f],c),f++},a.Parser.prototype.apppendInclude=function(b,c){var d,e;c=a.utils.trim(c.replace("#","")),d=a.domUtils.getElementById(this.document,c),d&&(e=a.domUtils.clone(d),this.markIncludeChildren(e),a.domUtils.appendChild(b,e))},a.Parser.prototype.markIncludeChildren=function(b){var c,d,e;for(c=this.findRootNodes(b),d=0,e=c.length,a.domUtils.setAttribute(b,"data-include","true"),a.domUtils.setAttribute(b,"style","display:none");e>d;)a.domUtils.setAttribute(c[d],"data-include","true"),d++},a.Parser.prototype.removeIncludes=function(b){var c,d;for(c=a.domUtils.getNodesByAttribute(b,"data-include"),d=c.length;d--;)a.domUtils.removeChild(b,c[d])}),a.Parser&&(a.Parser.prototype.findRels=function(b){var c,d,e,f,g,h,i,j,k,l={items:[],rels:{},"rel-urls":{}};for(k=a.domUtils.getNodesByAttribute(b,"rel"),c=0,d=k.length;d>c;){if(g=a.domUtils.getAttribute(k[c],"rel")){for(h=g.split(" "),f=0,e=h.length;e>f;){if(i=a.utils.trim(h[f]),j=a.domUtils.getAttrValFromTagList(k[c],["a","area"],"href"),j||(j=a.domUtils.getAttrValFromTagList(k[c],["link"],"href")),l.rels[i]||(l.rels[i]=[]),"string"==typeof this.options.baseUrl&&"string"==typeof j){var m=a.domUtils.resolveUrl(j,this.options.baseUrl);-1===l.rels[i].indexOf(m)&&l.rels[i].push(m)}f++}var n=null;a.domUtils.hasAttribute(k[c],"href")&&(n=a.domUtils.getAttribute(k[c],"href"),n&&(n=a.domUtils.resolveUrl(n,this.options.baseUrl)));var o=this.getRelProperties(k[c]);if(o.rels=h,n&&void 0===l["rel-urls"][n]&&(l["rel-urls"][n]=o),g.toLowerCase().indexOf("alternate")>-1){var p=this.getRelProperties(k[c]);if(n&&(p.url=n),h.length>1&&a.domUtils.hasAttribute(k[c],"rel")){var q=g;p.rel=a.utils.trim(q.toLowerCase().replace("alternate",""))}l.alternate||(l.alternate=[]),l.alternate.push(p)}}c++}return l},a.Parser.prototype.getRelProperties=function(b){var c={};return a.domUtils.hasAttribute(b,"media")&&(c.media=a.domUtils.getAttribute(b,"media")),a.domUtils.hasAttribute(b,"type")&&(c.type=a.domUtils.getAttribute(b,"type")),a.domUtils.hasAttribute(b,"hreflang")&&(c.hreflang=a.domUtils.getAttribute(b,"hreflang")),a.domUtils.hasAttribute(b,"title")&&(c.title=a.domUtils.getAttribute(b,"title")),""!==a.utils.trim(this.getPValue(b,!1))&&(c.text=this.getPValue(b,!1)),c},a.Parser.prototype.findRelImpied=function(b,c){var d,e,f;if(e=this.getMapping(c))for(var g in e.properties)if(e.properties.hasOwnProperty(g)){var h=e.properties[g],i=h.map?h.map:"p-"+g,j=0;if(h.relAlt&&a.domUtils.hasAttribute(b,"rel")){for(f=h.relAlt.length;f--;)a.domUtils.hasAttributeValue(b,"rel",h.relAlt[f])&&j++;j===h.relAlt.length&&(d=i)}}return d}),a.utils={isString:function(a){return"string"==typeof a},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isArray:function(a){return a&&!a.propertyIsEnumerable("length")&&"object"==typeof a&&"number"==typeof a.length},startWith:function(a,b){return 0===a.indexOf(b)},trim:function(a){return a&&this.isString(a)?a.replace(/^\s+|\s+$/g,""):""},replaceCharAt:function(a,b,c){return a&&a.length>b?a.substr(0,b)+c+a.substr(b+c.length):a},trimWhitespace:function(a){if(a&&a.length){for(var b=a.length,c=0;b--&&this.isOnlyWhiteSpace(a[b]);)a=this.replaceCharAt(a,b," ");for(b=a.length;b>c&&this.isOnlyWhiteSpace(a[c]);)a=this.replaceCharAt(a,b," "),c++}return this.trim(a)},isOnlyWhiteSpace:function(a){return!/[^\t\n\r ]/.test(a)},removeWhiteSpace:function(a){return a.replace(/[\t\n\r ]+/g," ")},hasProperties:function(a){var b;for(b in a)if(a.hasOwnProperty(b))return!0;return!1},sortObjects:function(a,b){return b=b?-1:1,function(c,d){return c=c[a],d=d[a],d>c?-1*b:c>d?1*b:0}}},function(a){var b,c,d,e,f;if(a){try{d=!!(new a).parseFromString("","text/html")}catch(g){d=!1}if(!d){try{var h=document.implementation.createHTMLDocument("");h.documentElement.innerHTML="<title></title><div></div>",f=!0}catch(g){f=!1}if(!f)try{e=!!(new a).parseFromString("","text/xml")}catch(g){d=!1}a.prototype&&(f||e)&&(b=a.prototype,c=b.parseFromString,b.parseFromString=function(b,d){if(/^\s*text\/html\s*(?:;|$)/i.test(d)){var g,h,i;return f?(g=document.implementation.createHTMLDocument(""),h=g.documentElement,h.innerHTML=b,i=h.firstElementChild):e&&(/^<html.*html>$/i.test(b)||(b="<html>"+b+"</html>"),g=(new a).parseFromString(b,"text/xml"),h=g.documentElement,i=h.firstElementChild),1===h.childElementCount&&"html"===i.localName.toLowerCase()&&g.replaceChild(i,h),g}return c.apply(this,arguments)})}}}(DOMParser),a.domUtils={ownerDocument:function(a){return a.ownerDocument},textContent:function(a){return a.textContent},innerHTML:function(a){return a.innerHTML},hasAttribute:function(a,b){return a.hasAttribute(b)},hasAttributeValue:function(a,b,c){return this.getAttributeList(a,b).indexOf(c)>-1},getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){a.setAttribute(b,c)},removeAttribute:function(a,b){a.removeAttribute(b)},getElementById:function(a,b){return a.querySelector("#"+b)},querySelector:function(a,b){return a.querySelector(b)},getAttributeList:function(a,b){var c,d=[];return c=a.getAttribute(b),c&&""!==c&&(c.indexOf(" ")>-1?d=c.split(" "):d.push(c)),d},hasAttributeValue:function(a,b,c){var d=this.getAttributeList(a,b);return d.indexOf(c)>-1},getNodesByAttribute:function(a,b){var c="["+b+"]";return a.querySelectorAll(c)},getNodesByAttributeValue:function(a,b,c){var d,e=[],f=0,g=[];if(e=this.getNodesByAttribute(a,b))for(d=e.length;d>f;)this.hasAttributeValue(e[f],b,c)&&g.push(e[f]),f++;return g},getAttrValFromTagList:function(a,b,c){for(var d=b.length;d--;)if(a.tagName.toLowerCase()===b[d]){var e=this.getAttribute(a,c);if(e&&""!==e)return e}return null},isSingleDescendant:function(a,b){for(var c,d=a.children.length,e=0,f=null;d--;)c=a.children[d],1===c.nodeType&&(this.hasTagName(c,b)&&(f=c),e++);return 1===e&&f?f:null},hasTagName:function(a,b){for(var c=b.length;c--;)if(a.tagName.toLowerCase()===b[c])return!0;return!1},appendChild:function(a,b){return a.appendChild(b)},removeChild:function(a){return a.parentNode?a.parentNode.removeChild(a):null},clone:function(a){var b=a.cloneNode(!0);return b.removeAttribute("id"),b},resolveUrl:function(b,c){if(a.utils.isString(b)){if(""!==b&&-1===b.indexOf(":")&&a.utils.isString(c)){var d=new DOMParser,e=d.parseFromString('<html><head><base href="'+c+'"><head><body><a href="'+b+'"></a></body></html>',"text/html");return e.getElementsByTagName("a")[0].href}return b}return""},getElementText:function(a){return a&&a.data?a.data:""},getOrderedAttributes:function(b){for(var c=b.outerHTML,d=[],e=0;e<b.attributes.length;e++){var f=b.attributes[e];f.indexNum=c.indexOf(f.name),d.push(f)}return d.sort(a.utils.sortObjects("indexNum"))},decodeEntities:function(a,b){return a.createTextNode(b).nodeValue}},a.ISODate=function(a,b){this.clear(),this.format=b?b:"auto",this.setFormatSep(),arguments[0]&&this.parse(a,b)},a.ISODate.prototype={clear:function(){this.clearDate(),this.clearTime(),this.clearTimeZone(),this.setAutoProfileState()},clearDate:function(){this.dY=-1,this.dM=-1,this.dD=-1,this.dDDD=-1},clearTime:function(){this.tH=-1,this.tM=-1,this.tS=-1,this.tD=-1},clearTimeZone:function(){this.tzH=-1,this.tzM=-1,this.tzPN="+",this.z=!1},setAutoProfileState:function(){this.autoProfile={sep:"T",dsep:"-",tsep:":",tzsep:":",tzZulu:"Z"}},parse:function(a,b){this.clear();var c=[],d=[],e=0,f="",g="",h="";return b&&(this.format=b),a.indexOf("t")>-1&&(this.autoProfile.sep="t"),a.indexOf("z")>-1&&(this.autoProfile.tzZulu="z"),a.indexOf("Z")>-1&&(this.autoProfile.tzZulu="Z"),-1===a.toUpperCase().indexOf("T")&&(this.autoProfile.sep=" "),a=a.toUpperCase().replace(" ","T"),a.indexOf("T")>-1?(c=a.split("T"),f=c[0],g=c[1],g.indexOf("Z")>-1&&(this.z=!0),(g.indexOf("+")>-1||g.indexOf("-")>-1)&&(d=g.split("Z"),g=d[0],h=d[1],(g.indexOf("+")>-1||g.indexOf("-")>-1)&&(e=0,e=g.indexOf("+")>-1?g.indexOf("+"):g.indexOf("-"),h=g.substring(e,g.length),g=g.substring(0,e)))):f=a,""!==f&&(this.parseDate(f),""!==g&&(this.parseTime(g),""!==h&&this.parseTimeZone(h))),this.toString(b)},parseDate:function(a,b){this.clearDate();var c=[];return-1===a.indexOf("-")&&(this.autoProfile.tsep=""),c=a.match(/(\d\d\d\d)-(\d\d\d)/),c&&(c[1]&&(this.dY=c[1]),c[2]&&(this.dDDD=c[2])),-1===this.dDDD&&(c=a.match(/(\d\d\d\d)?-?(\d\d)?-?(\d\d)?/),c[1]&&(this.dY=c[1]),c[2]&&(this.dM=c[2]),c[3]&&(this.dD=c[3])),this.toString(b)},parseTime:function(a,b){this.clearTime();var c=[];return-1===a.indexOf(":")&&(this.autoProfile.tsep=""),c=a.match(/(\d\d)?:?(\d\d)?:?(\d\d)?.?([0-9]+)?/),c[1]&&(this.tH=c[1]),c[2]&&(this.tM=c[2]),c[3]&&(this.tS=c[3]),c[4]&&(this.tD=c[4]),this.toTimeString(b)},parseTimeZone:function(a,b){this.clearTimeZone();var c=[];return"z"===a.toLowerCase()?(this.z=!0,this.autoProfile.tzZulu="z"===a?"z":"Z"):(-1===a.indexOf(":")&&(this.autoProfile.tzsep=""),c=a.match(/([\-\+]{1})?(\d\d)?:?(\d\d)?/),c[1]&&(this.tzPN=c[1]),c[2]&&(this.tzH=c[2]),c[3]&&(this.tzM=c[3])),this.tzZulu="z",this.toTimeString(b)},toString:function(a){var b="";return a&&(this.format=a),this.setFormatSep(),this.dY>-1?(b=this.dY,this.dM>0&&this.dM<13&&(b+=this.dsep+this.dM,this.dD>0&&this.dD<32&&(b+=this.dsep+this.dD,this.tH>-1&&this.tH<25&&(b+=this.sep+this.toTimeString(a)))),this.dDDD>-1&&(b+=this.dsep+this.dDDD)):this.tH>-1&&(b+=this.toTimeString(a)),b},toTimeString:function(a){var b="";return a&&(this.format=a),this.setFormatSep(),this.tH&&this.tH>-1&&this.tH<25&&(b+=this.tH,this.tM>-1&&this.tM<61&&(b+=this.tsep+this.tM,this.tS>-1&&this.tS<61&&(b+=this.tsep+this.tS,this.tD>-1&&(b+="."+this.tD))),this.z?b+=this.tzZulu:this.tzH&&this.tzH>-1&&this.tzH<25&&(b+=this.tzPN+this.tzH,this.tzM>-1&&this.tzM<61&&(b+=this.tzsep+this.tzM))),b},setFormatSep:function(){switch(this.format.toLowerCase()){case"rfc3339":this.sep="T",this.dsep="",this.tsep="",this.tzsep="",this.tzZulu="Z";break;case"w3c":this.sep="T",this.dsep="-",this.tsep=":",this.tzsep=":",this.tzZulu="Z";break;case"html5":this.sep=" ",this.dsep="-",this.tsep=":",this.tzsep=":",this.tzZulu="Z";break;default:this.sep=this.autoProfile.sep,this.dsep=this.autoProfile.dsep,this.tsep=this.autoProfile.tsep,this.tzsep=this.autoProfile.tzsep,this.tzZulu=this.autoProfile.tzZulu}},hasFullDate:function(){return-1!==this.dY&&-1!==this.dM&&-1!==this.dD},hasDate:function(){return-1!==this.dY},hasTime:function(){return-1!==this.tH},hasTimeZone:function(){return-1!==this.tzH}},a.ISODate.prototype.constructor=a.ISODate,a.dates={hasAM:function(a){return a=a.toLowerCase(),a.indexOf("am")>-1||a.indexOf("a.m.")>-1},hasPM:function(a){return a=a.toLowerCase(),a.indexOf("pm")>-1||a.indexOf("p.m.")>-1},removeAMPM:function(a){return a.replace("pm","").replace("p.m.","").replace("am","").replace("a.m.","")},isDuration:function(b){return a.utils.isString(b)&&(b=b.toLowerCase(),a.utils.startWith(b,"p"))?!0:!1},isTime:function(b){if(a.utils.isString(b)){if(b=b.toLowerCase(),b=a.utils.trim(b),b.match(":")&&(a.utils.startWith(b,"z")||a.utils.startWith(b,"-")||a.utils.startWith(b,"+")))return!0;if(b.match(/^[0-9]/)&&(this.hasAM(b)||this.hasPM(b)))return!0;if(b.match(":")&&!b.match(/t|\s/))return!0;if(a.utils.isNumber(b)&&(2===b.length||4===b.length||6===b.length))return!0}return!1},parseAmPmTime:function(b){var c=b,d=[];return a.utils.isString(c)&&(b=b.replace(/[ ]+/g,""),(b.match(":")||this.hasAM(b)||this.hasPM(b))&&(b.match(":")?d=b.split(":"):(d[0]=b,d[0]=this.removeAMPM(d[0])),this.hasPM(b)&&d[0]<12&&(d[0]=parseInt(d[0],10)+12),d[0]&&1===d[0].length&&(d[0]="0"+d[0]),d[0]&&(b=d.join(":")))),this.removeAMPM(b)},dateTimeUnion:function(b,c,d){var e=new a.ISODate(b,d),f=new a.ISODate;return f.parseTime(this.parseAmPmTime(c),d),e.hasFullDate()&&f.hasTime()?(e.tH=f.tH,e.tM=f.tM,e.tS=f.tS,e.tD=f.tD,e):e.hasFullDate()?e:new a.ISODate},concatFragments:function(b,c){var d=new a.ISODate,e=0,f="";if(b[0].toUpperCase().match("T"))return new a.ISODate(b[0],c);for(e=0;e<b.length;e++){if(f=b[e],"-"===f.charAt(4)&&d.hasFullDate()===!1&&d.parseDate(f),(f.indexOf(":")>-1||a.utils.isNumber(this.parseAmPmTime(f)))&&d.hasTime()===!1){var g=this.splitTimeAndZone(f);f=g[0],f=this.parseAmPmTime(f),d.parseTime(f),g.length>1&&d.parseTimeZone(g[1],c)}("-"===f.charAt(0)||"+"===f.charAt(0)||"Z"===f.toUpperCase())&&d.hasTimeZone()===!1&&d.parseTimeZone(f)}return d},splitTimeAndZone:function(a){for(var b=[a],c=["-","+","z","Z"],d=c.length;d--;)if(a.indexOf(c[d])>-1){b[0]=a.slice(0,a.indexOf(c[d])),b.push(a.slice(a.indexOf(c[d])));break}return b}},a.text={textFormat:"whitespacetrimmed",blockLevelTags:["h1","h2","h3","h4","h5","h6","p","hr","pre","table","address","article","aside","blockquote","caption","col","colgroup","dd","div","dt","dir","fieldset","figcaption","figure","footer","form","header","hgroup","hr","li","map","menu","nav","optgroup","option","section","tbody","testarea","tfoot","th","thead","tr","td","ul","ol","dl","details"],excludeTags:["noframe","noscript","script","style","frames","frameset"],parse:function(b,c,d){var e;return this.textFormat=d?d:this.textFormat,"normalised"===this.textFormat?(e=this.walkTreeForText(c),void 0!==e?this.normalise(b,e):""):this.formatText(b,a.domUtils.textContent(c),this.textFormat)},parseText:function(a,b,c){var d=a.createElement("div");return d.innerHTML=b,this.parse(a,d,c)},formatText:function(b,c,d){if(this.textFormat=d?d:this.textFormat,c){var e="",f=/(<([^>]+)>)/gi;return e=c.replace(f,""),"whitespacetrimmed"===this.textFormat&&(e=a.utils.trimWhitespace(e)),a.domUtils.decodeEntities(b,e)}return""},normalise:function(b,c){return c=c.replace(/&nbsp;/g," "),c=a.utils.removeWhiteSpace(c),c=a.domUtils.decodeEntities(b,c),c=c.replace("â€“","-"),a.utils.trim(c)},walkTreeForText:function(b){var c="",d=0;if(b.tagName&&this.excludeTags.indexOf(b.tagName.toLowerCase())>-1)return c;if(b.nodeType&&3===b.nodeType&&(c+=a.domUtils.getElementText(b)),b.childNodes&&b.childNodes.length>0)for(d=0;d<b.childNodes.length;d++){var e=this.walkTreeForText(b.childNodes[d]);void 0!==e&&(c+=e)}return b.tagName&&-1!==this.blockLevelTags.indexOf(b.tagName.toLowerCase())&&(c+=" "),""===c?void 0:c}},a.html={selfClosingElt:["area","base","br","col","hr","img","input","link","meta","param","command","keygen","source"],parse:function(a){var b="",c=0;if(a.childNodes&&a.childNodes.length>0)for(c=0;c<a.childNodes.length;c++){var d=this.walkTreeForHtml(a.childNodes[c]);void 0!==d&&(b+=d)}return b},walkTreeForHtml:function(b){var c="",d=0;if(b.nodeType&&3===b.nodeType&&(c+=a.domUtils.getElementText(b)),b.nodeType&&1===b.nodeType&&a.domUtils.hasAttribute(b,"data-include")===!1){c+="<"+b.tagName.toLowerCase();var e=a.domUtils.getOrderedAttributes(b);for(d=0;d<e.length;d++)c+=" "+e[d].name+'="'+e[d].value+'"';if(-1===this.selfClosingElt.indexOf(b.tagName.toLowerCase())&&(c+=">"),b.childNodes&&b.childNodes.length>0)for(d=0;d<b.childNodes.length;d++){var f=this.walkTreeForHtml(b.childNodes[d]);void 0!==f&&(c+=f)}c+=this.selfClosingElt.indexOf(b.tagName.toLowerCase())>-1?" />":"</"+b.tagName.toLowerCase()+">"}return""===c?void 0:c}},a.maps["h-adr"]={root:"adr",name:"h-adr",properties:{"post-office-box":{},"street-address":{},"extended-address":{},locality:{},region:{},"postal-code":{},"country-name":{}}},a.maps["h-card"]={root:"vcard",name:"h-card",properties:{fn:{map:"p-name"},adr:{uf:["h-adr"]},agent:{uf:["h-card"]},bday:{map:"dt-bday"},"class":{},category:{map:"p-category",relAlt:["tag"]},email:{map:"u-email"},geo:{map:"p-geo",uf:["h-geo"]},key:{},label:{},logo:{map:"u-logo"},mailer:{},"honorific-prefix":{},"given-name":{},"additional-name":{},"family-name":{},"honorific-suffix":{},nickname:{},note:{},org:{},"p-organization-name":{},"p-organization-unit":{},photo:{map:"u-photo"},rev:{map:"dt-rev"},role:{},sequence:{},"sort-string":{},sound:{map:"u-sound"},title:{},tel:{},tz:{},uid:{map:"u-uid"},url:{map:"u-url"}}},a.maps["h-entry"]={root:"hentry",name:"h-entry",properties:{"entry-title":{map:"p-name"},"entry-summary":{map:"p-summary"},"entry-content":{map:"e-content"},published:{map:"dt-published"},updated:{map:"dt-updated"},author:{uf:["h-card"]},category:{map:"p-category",relAlt:["tag"]},geo:{map:"p-geo",uf:["h-geo"]},latitude:{},longitude:{},url:{map:"u-url",relAlt:["bookmark"]}}},a.maps["h-event"]={root:"vevent",name:"h-event",properties:{summary:{map:"p-name"},dtstart:{map:"dt-start"},dtend:{map:"dt-end"},description:{},url:{map:"u-url"},category:{map:"p-category",relAlt:["tag"]},location:{uf:["h-card"]},geo:{uf:["h-geo"]},latitude:{},longitude:{},duration:{map:"dt-duration"},contact:{uf:["h-card"]},organizer:{uf:["h-card"]},attendee:{uf:["h-card"]},uid:{map:"u-uid"},attach:{map:"u-attach"},status:{},rdate:{},rrule:{}}},a.maps["h-geo"]={root:"geo",name:"h-geo",properties:{latitude:{},longitude:{}}},a.maps["h-item"]={root:"item",name:"h-item",subTree:!1,properties:{fn:{map:"p-name"},url:{map:"u-url"},photo:{map:"u-photo"}}},a.maps["h-listing"]={root:"hlisting",name:"h-listing",properties:{version:{},lister:{uf:["h-card"]
},dtlisted:{map:"dt-listed"},dtexpired:{map:"dt-expired"},location:{},price:{},item:{uf:["h-card","a-adr","h-geo"]},summary:{map:"p-name"},description:{map:"e-description"},listing:{}}},a.maps["h-news"]={root:"hnews",name:"h-news",properties:{entry:{uf:["h-entry"]},geo:{uf:["h-geo"]},latitude:{},longitude:{},"source-org":{uf:["h-card"]},dateline:{uf:["h-card"]},"item-license":{map:"u-item-license"},principles:{map:"u-principles",relAlt:["principles"]}}},a.maps["h-org"]={root:"h-x-org",name:"h-org",properties:{"organization-name":{},"organization-unit":{}}},a.maps["h-product"]={root:"hproduct",name:"h-product",properties:{brand:{uf:["h-card"]},category:{map:"p-category",relAlt:["tag"]},price:{},description:{map:"e-description"},fn:{map:"p-name"},photo:{map:"u-photo"},url:{map:"u-url"},review:{uf:["h-review","h-review-aggregate"]},listing:{uf:["h-listing"]},identifier:{map:"u-identifier"}}},a.maps["h-recipe"]={root:"hrecipe",name:"h-recipe",properties:{fn:{map:"p-name"},ingredient:{map:"e-ingredient"},"yield":{},instructions:{map:"e-instructions"},duration:{map:"dt-duration"},photo:{map:"u-photo"},summary:{},author:{uf:["h-card"]},published:{map:"dt-published"},nutrition:{},tag:{}}},a.maps["h-resume"]={root:"hresume",name:"h-resume",properties:{summary:{},contact:{uf:["h-card"]},education:{uf:["h-card","h-event"]},experience:{uf:["h-card","h-event"]},skill:{},affiliation:{uf:["h-card"]}}},a.maps["h-review-aggregate"]={root:"hreview-aggregate",name:"h-review-aggregate",properties:{summary:{map:"p-name"},item:{map:"p-item",uf:["h-item","h-geo","h-adr","h-card","h-event","h-product"]},rating:{},average:{},best:{},worst:{},count:{},votes:{},category:{map:"p-category",relAlt:["tag"]},url:{map:"u-url",relAlt:["self","bookmark"]}}},a.maps["h-review"]={root:"hreview",name:"h-review",properties:{summary:{map:"p-name"},description:{map:"e-description"},item:{map:"p-item",uf:["h-item","h-geo","h-adr","h-card","h-event","h-product"]},reviewer:{uf:["h-card"]},dtreviewer:{map:"dt-reviewer"},rating:{},best:{},worst:{},category:{map:"p-category",relAlt:["tag"]},url:{map:"u-url",relAlt:["self","bookmark"]}}},a.rels={friend:["yes","external"],acquaintance:["yes","external"],contact:["yes","external"],met:["yes","external"],"co-worker":["yes","external"],colleague:["yes","external"],"co-resident":["yes","external"],neighbor:["yes","external"],child:["yes","external"],parent:["yes","external"],sibling:["yes","external"],spouse:["yes","external"],kin:["yes","external"],muse:["yes","external"],crush:["yes","external"],date:["yes","external"],sweetheart:["yes","external"],me:["yes","external"],license:["yes","yes"],nofollow:["no","external"],tag:["no","yes"],self:["no","external"],bookmark:["no","external"],author:["no","external"],home:["no","external"],directory:["no","external"],enclosure:["no","external"],pronunciation:["no","external"],payment:["no","external"],principles:["no","external"]};var b={};return b.get=function(b){var c=new a.Parser;return c.get(b)},b.count=function(b){var c=new a.Parser;return c.count(b)},b.isMicroformat=function(b){var c=new a.Parser;return c.isMicroformat(b)},b});
//# sourceMappingURL=microformat-shiv.min.js.map