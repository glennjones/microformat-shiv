/*
   microformat-shiv - v0.3.4
   Built: 2015-06-29 10:06 - http://microformat-shiv.com
   Copyright (c) 2015 Glenn Jones
   Licensed MIT 
*/



!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Microformats=b()}(this,function(){var a=function(a){return a.Parser=function(){this.rootPrefix="h-",this.propertyPrefixes=["p-","dt-","u-","e-"],this.options={baseUrl:"",filters:[],version1:!0,children:!0,childrenRel:!1,rel:!0,includes:!0,textFormat:"whitespacetrimmed",dateFormat:"auto"},a.maps=a.maps?a.maps:{},a.rels=a.rels?a.rels:{}},a.Parser.prototype={get:function(b,c,d){var e,f,g,h=null,i={},j=[];if(this.mergeOptions(d),this.rootID=0,!b||!c)return h=[{error:"No DOM or rootNode given"}],{errors:h,data:{}};if(this.options.includes&&this.addIncludes(b,c),f=c.querySelector("base"),f&&(g=a.domUtils.getAttribute(b,f,"href"),g&&(this.options.baseUrl=g)),this.options.filters.length>0){var k=this.findFilterNodes(b,c,this.options.filters);j=this.walkRoot(k[0],k[1])}else j=this.walkRoot(b,c);return i.items=j,this.options.rel&&(e=this.findRels(b,c),i.rels=e.rels,i["rel-urls"]=e["rel-urls"],e.alternate&&(i.alternates=e.alternate)),this.clearUpDom(b),i},findFilterNodes:function(){return[null,null]},count:function(b,c){function d(a,b){i[a]?i[a]=i[a]+b:i[a]=b}var e,f,g,h,i={};for(e=this.findRootNodes(b,c),h=e.length;h--;)for(f=a.domUtils.getAttributeList(b,e[h],"class"),g=f.length;g--;){a.utils.startWith(f[g],"h-")&&d(f[g],1);for(var j in a.maps)a.maps[j].root===f[g]&&-1===f.indexOf(j)&&d(j,1)}return i},shouldInclude:function(b,c){var d;if(a.utils.isArray(c)&&c.length>0){for(d=c.length;d--;)if(b.type[0]===c[d])return!0;return!1}return!0},findChildItems:function(b,c,d){var e,f,g,h,i,j=[],k=[];if(e=this.findRootNodes(b,c,!0),e.length>0)for(g=e.length,f=0;g>f;){var l=this.getUfClassNames(b,e[f],d);if(l.root.length>0&&0===l.properties.length)for(k=this.walkTree(b,e[f],!0),i=k.length,h=0;i>h;)k[h]&&a.utils.hasProperties(k[h].properties)&&j.push(k[h]),h++;f++}return j},findRootNodes:function(b,c,d){var e,f,g,h,i,j=null,k=[],l=[];for(i in a.maps)a.maps.hasOwnProperty(i)&&l.push(a.maps[i].root);for(d=d?d:!1,j=d?a.domUtils.getNodesByAttribute(b,c,"class"):a.domUtils.getNodesByAttribute(b,c,"class"),f=0,g=j.length;g>f;){for(e=a.domUtils.getAttributeList(b,j[f],"class"),h=e.length;h--;){if(l.indexOf(e[h])>-1){k.push(j[f]);break}if(a.utils.startWith(e[h],"h-")){k.push(j[f]);break}}f++}return k},walkRoot:function(a,b){var c,d=this,e=[],f=[];if(c=this.getUfClassNames(a,b),c&&c.root.length>0)e=this.walkTree(a,b),e.length>0&&(f=f.concat(e));else if(b&&b.children&&b.children.length>0&&this.findRootNodes(a,b,!0).length>-1)for(var g=0;g<b.children.length;g++){var h=b.children[g];e=d.walkRoot(a,h),e.length>0&&(f=f.concat(e))}return f},walkTree:function(a,b){var c,d,e,f=[];return c=this.getUfClassNames(a,b),c&&c.root.length&&c.root.length>0&&(this.rootID++,e=this.rootID,d=this.createUfObject(c.root),this.walkChildren(a,b,d,c.root,e,c),this.impliedRules&&this.impliedRules(a,b,d,c),f.push(d)),f},walkChildren:function(b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q=this;for(n=0,o=c.children.length;o>n;){p=c.children[n];var r=q.getUfClassNames(b,p,e);if(r.root.length>0&&r.properties.length>0&&!p.addedAsRoot){for(h=q.createUfObject(r.root,a.text.parse(b,p,q.options.textFormat)),g&&1===g.root.length&&1===g.properties.length&&q.impliedValueRule&&(d=q.impliedValueRule(d,g.properties[0],r.properties[0],j)),k=q.removePropPrefix(r.properties[0]),d.properties[k]?d.properties[k].push(h):d.properties[k]=[h],q.rootID++,p.addedAsRoot=!0,m=0,l=h.type.length,i=q.rootID;l>m;)q.walkChildren(b,p,h,h.type,i,r),m++;this.impliedRules&&q.impliedRules(b,p,h,r)}if(0===r.root.length&&r.properties.length>0){for(m=0,l=r.properties.length;l>m;)j=q.getValue(b,p,r.properties[m],d),k=q.removePropPrefix(r.properties[m]),g&&1===g.root.length&&1===g.properties.length&&q.impliedValueRule&&(d=q.impliedValueRule(d,g.properties[0],r.properties[m],j)),""===j||q.hasRootID(b,p,f,k)||(d.properties[k]?d.properties[k].push(j):d.properties[k]=[j],q.appendRootID(b,p,f,k)),m++;q.walkChildren(b,p,d,e,f,r)}if(0===r.root.length&&0===r.properties.length&&q.walkChildren(b,p,d,e,f,r),q.options.children&&r.root.length>0&&0===r.properties.length){for(h=q.createUfObject(r.root,a.text.parse(b,p,q.options.textFormat)),d.children||(d.children=[]),q.hasRootID(b,p,f,"child-root")||(d.children.push(h),q.appendRootID(b,p,f,"child-root"),q.rootID++),m=0,l=h.type.length,i=q.rootID;l>m;)q.walkChildren(b,p,h,h.type,i,r),m++;q.impliedRules&&q.impliedRules(b,p,h,r)}n++}},getValue:function(b,c,d,e){var f="";return a.utils.startWith(d,"p-")&&(f=this.getPValue(b,c,!0)),a.utils.startWith(d,"e-")&&(f=this.getEValue(b,c)),a.utils.startWith(d,"u-")&&(f=this.getUValue(b,c,!0)),a.utils.startWith(d,"dt-")&&(f=this.getDTValue(b,c,d,e,!0)),f},getPValue:function(b,c,d){var e="";return d&&(e=this.getValueClass(b,c,"p")),!e&&d&&(e=this.getValueTitle(b,c)),e||(e=a.domUtils.getAttrValFromTagList(b,c,["abbr"],"title")),e||(e=a.domUtils.getAttrValFromTagList(b,c,["data"],"value")),("br"===c.name||"hr"===c.name)&&(e=""),e||(e=a.domUtils.getAttrValFromTagList(b,c,["img","area"],"alt")),e||(e=a.text.parse(b,c,this.options.textFormat)),e?e:""},getEValue:function(b,c){function d(b,c,d,e){var f,g,h;for(g=a.domUtils.getNodesByAttribute(b,c,d),f=g.length;f--;)try{h=a.domUtils.getAttribute(b,g[f],d),h&&""!==h&&""!==e&&-1===h.indexOf(":")&&(h=a.domUtils.resolveUrl(b,h,e),a.domUtils.setAttribute(b,g[f],d,h))}catch(i){}}var e={value:"",html:""};return d(b,c,"src",this.options.baseUrl),d(b,c,"href",this.options.baseUrl),e.value=a.text.parse(b,c,this.options.textFormat),e.html=a.html.parse(b,c),e},getUValue:function(b,c,d){var e="";return d&&(e=this.getValueClass(b,c,"u")),!e&&d&&(e=this.getValueTitle(b,c)),e||(e=a.domUtils.getAttrValFromTagList(b,c,["a","area"],"href")),e||(e=a.domUtils.getAttrValFromTagList(b,c,["img"],"src")),e||(e=a.domUtils.getAttrValFromTagList(b,c,["object"],"data")),e&&""!==e&&-1===e.indexOf(":")&&(e=a.domUtils.resolveUrl(b,e,this.options.baseUrl)),e||(e=a.domUtils.getAttrValFromTagList(b,c,["abbr"],"title")),e||(e=a.domUtils.getAttrValFromTagList(b,c,["data"],"value")),e||(e=a.text.parse(b,c,this.options.textFormat)),e?e:""},getDTValue:function(b,c,d,e,f){var g="";return f&&(g=this.getValueClass(b,c,"dt")),!g&&f&&(g=this.getValueTitle(b,c)),g||(g=a.domUtils.getAttrValFromTagList(b,c,["time","ins","del"],"datetime")),g||(g=a.domUtils.getAttrValFromTagList(b,c,["abbr"],"title")),g||(g=a.domUtils.getAttrValFromTagList(b,c,["data"],"value")),g||(g=a.text.parse(b,c,this.options.textFormat)),g?a.dates.isDuration(g)?g:a.dates.isTime(g)?(e&&e.times.push([d,a.dates.parseAmPmTime(g,this.options.dateFormat)]),a.dates.parseAmPmTime(g,this.options.dateFormat)):(e&&e.dates.push([d,new a.ISODate(g).toString(this.options.dateFormat)]),new a.ISODate(g).toString(this.options.dateFormat)):""},appendRootID:function(b,c,d,e){if(this.hasRootID(b,c,d,e)===!1){var f=[];a.domUtils.hasAttribute(b,c,"rootids")&&(f=a.domUtils.getAttributeList(b,c,"rootids")),f.push("id"+d+"-"+e),a.domUtils.setAttribute(b,c,"rootids",f.join(" "))}},hasRootID:function(b,c,d,e){var f=[];return a.domUtils.hasAttribute(b,c,"rootids")?(f=a.domUtils.getAttributeList(b,c,"rootids"),f.indexOf("id"+d+"-"+e)>-1):!1},getValueClass:function(b,c,d){var e,f,g,h=this,i=[];for(f=0,g=c.children.length;g>f;){e=c.children[f];var j=null;if(a.domUtils.hasAttributeValue(b,e,"class","value")){switch(d){case"p":j=h.getPValue(b,e,!1);break;case"u":j=h.getUValue(b,e,!1);break;case"dt":j=h.getDTValue(b,e,"",null,!1)}j&&i.push(a.utils.trim(j))}f++}return i.length>0?"p"===d?a.text.parseText(b,i.join(" "),this.options.textFormat):"u"===d?i.join(""):"dt"===d?a.dates.concatFragments(i).toString(this.options.dateFormat):void 0:null},getValueTitle:function(b,c){var d,e,f,g=[];for(d=a.domUtils.getNodesByAttributeValue(b,c,"class","value-title"),f=0,e=d.length;e>f;)a.domUtils.hasAttribute(b,d[f],"title")&&g.push(a.domUtils.getAttribute(b,d[f],"title")),f++;return g.join("")},hasHClass:function(a,b){var c=this.getUfClassNames(a,b);return c.root&&c.root.length>0?!0:!1},getUfClassNames:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=this,t={root:[],properties:[]};if(e=a.domUtils.getAttribute(b,c,"class"))for(g=e.split(" "),j=0,i=g.length;i>j;){for(h=a.utils.trim(g[j]),a.utils.startWith(h,s.rootPrefix)&&t.root.push(h),k=s.propertyPrefixes.length;k--;)a.utils.startWith(h,s.propertyPrefixes[k])&&t.properties.push(h);if(s.options.version1){for(f in a.maps)a.maps.hasOwnProperty(f)&&a.maps[f].root===h&&-1===t.root.indexOf(f)&&(a.maps[f].subTree&&s.isSubTreeRoot(b,c,a.maps[f],g)===!1?t.properties.push("p-"+a.maps[f].root):t.root.push(f));if(d)for(var u=0;u<d.length;u++)if(r=d[u],m=s.getMapping(r))for(f in m.properties)if(m.properties.hasOwnProperty(f)&&(n=m.properties[f],o=n.map?n.map:"p-"+f,f===h))if(n.uf){for(l=0;i>l;)p=s.getV2RootName(g[l]),n.uf.indexOf(p)>-1&&-1===t.root.indexOf(p)&&t.root.push(p),l++;-1===t.properties.indexOf(o)&&t.properties.push(o)}else-1===t.properties.indexOf(o)&&t.properties.push(o)}j++}if(d)for(var v=0;v<d.length;v++)r=d[v],q=this.findRelImpied(b,c,r),q&&-1===t.properties.indexOf(q)&&t.properties.push(q);return t},getMapping:function(b){var c;for(c in a.maps)if(a.maps[c].root===b||c===b)return a.maps[c];return null},getV2RootName:function(b){var c;for(c in a.maps)if(a.maps[c].root===b)return c;return null},isSubTreeRoot:function(b,c,d,e){var f,g,h,i;for(f=this.createUfObject(d.name),g=!1,i=0,h=e.length;h>i;){var j=a.utils.trim(e[i]);for(var k in a.maps)if(a.maps.hasOwnProperty(k)&&a.maps[k].root===j&&a.maps[k].root!==d.root){g=!0;break}i++}return this.walkChildren(b,c,f,d.name,null,null),a.utils.hasProperties(f.properties)&&g===!1?!0:!1},findRelImpied:function(b,c,d){var e,f,g;if(f=this.getMapping(d))for(var h in f.properties)if(f.properties.hasOwnProperty(h)){var i=f.properties[h],j=i.map?i.map:"p-"+h,k=0;if(i.relAlt&&a.domUtils.hasAttribute(b,c,"rel")){for(g=i.relAlt.length;g--;)a.domUtils.hasAttributeValue(b,c,"rel",i.relAlt[g])&&k++;k===i.relAlt.length&&(e=j)}}return e},createUfObject:function(b,c){var d={};return c&&a.utils.isOnlyWhiteSpace(c)===!1&&(d.value=c),a.utils.isArray(b)?d.type=b:d.type=[b],d.properties={},d.times=[],d.dates=[],d.altValue=null,d},removePropPrefix:function(b){var c;for(c=this.propertyPrefixes.length;c--;){var d=this.propertyPrefixes[c];a.utils.startWith(b,d)&&(b=b.substr(d.length))}return b},findRels:function(b,c,d){var e,f,g,h,i,j,k,l,m,n={items:[],rels:{},"rel-urls":{}};for(d=d?d:!1,m=d?a.domUtils.getNodesByAttribute(b,c.children,"rel"):a.domUtils.getNodesByAttribute(b,c,"rel"),e=0,f=m.length;f>e;){if(i=a.domUtils.getAttribute(b,m[e],"rel")){for(j=i.split(" "),h=0,g=j.length;g>h;){if(k=a.utils.trim(j[h]),l=a.domUtils.getAttrValFromTagList(b,m[e],["a","area"],"href"),l||(l=a.domUtils.getAttrValFromTagList(b,m[e],["link"],"href")),n.rels[k]||(n.rels[k]=[]),"string"==typeof this.options.baseUrl&&"string"==typeof l){var o=a.domUtils.resolveUrl(b,l,this.options.baseUrl);-1===n.rels[k].indexOf(o)&&n.rels[k].push(o)}h++}var p=null;a.domUtils.hasAttribute(b,m[e],"href")&&(p=a.domUtils.getAttribute(b,m[e],"href"),p&&(p=a.domUtils.resolveUrl(b,p,this.options.baseUrl)));var q=this.getRelProperties(b,m[e]);if(q.rels=j,p&&void 0===n["rel-urls"][p]&&(n["rel-urls"][p]=q),i.toLowerCase().indexOf("alternate")>-1){var r=this.getRelProperties(b,m[e]);if(p&&(r.url=p),j.length>1&&a.domUtils.hasAttribute(b,m[e],"rel")){var s=i;r.rel=a.utils.trim(s.toLowerCase().replace("alternate",""))}n.alternate||(n.alternate=[]),n.alternate.push(r)}}e++}return n},getRelProperties:function(b,c){var d={};return a.domUtils.hasAttribute(b,c,"media")&&(d.media=a.domUtils.getAttribute(b,c,"media")),a.domUtils.hasAttribute(b,c,"type")&&(d.type=a.domUtils.getAttribute(b,c,"type")),a.domUtils.hasAttribute(b,c,"hreflang")&&(d.hreflang=a.domUtils.getAttribute(b,c,"hreflang")),a.domUtils.hasAttribute(b,c,"title")&&(d.title=a.domUtils.getAttribute(b,c,"title")),""!==a.utils.trim(this.getPValue(b,c,!1))&&(d.text=this.getPValue(b,c,!1)),d},addIncludes:function(a,b){this.addAttributeIncludes(a,b,"itemref"),this.addAttributeIncludes(a,b,"headers"),this.addClassIncludes(a,b)},addAttributeIncludes:function(b,c,d){var e,f,g,h,i,j;for(e=a.domUtils.getNodesByAttribute(b,c,d),h=0,g=e.length;g>h;){if(f=a.domUtils.getAttributeList(b,e[h],d))for(i=0,j=f.length;j>i;)this.apppendInclude(b,e[h],f[i]),i++;h++}},addClassIncludes:function(b,c){var d,e,f,g=0;for(e=a.domUtils.getNodesByAttributeValue(b,c,"class","include"),f=e.length;f>g;)d=a.domUtils.getAttrValFromTagList(b,e[g],["a"],"href"),d||(d=a.domUtils.getAttrValFromTagList(b,e[g],["object"],"data")),this.apppendInclude(b,e[g],d),g++},apppendInclude:function(b,c,d){var e,f;d=a.utils.trim(d.replace("#","")),e=b.getElementById(d),null===e&&(e=this.options.node.querySelector("#"+d)),e&&(f=a.domUtils.clone(b,e),this.markIncludeChildren(b,f),a.domUtils.appendChild(b,c,f))},markIncludeChildren:function(b,c){var d,e,f;for(d=this.findRootNodes(b,c),e=0,f=d.length,a.domUtils.setAttribute(b,c,"data-include","true"),a.domUtils.setAttribute(b,c,"style","display:none");f>e;)a.domUtils.setAttribute(b,d[e],"data-include","true"),e++},expandURLs:function(b,c,d){function e(c,e){if(c&&c.length)for(var f=c.length;f--;){var g=c[f].getAttribute(e);0!==g.toLowerCase().indexOf("http")&&c[f].setAttribute(e,a.domUtils.resolveUrl(b,g,d))}}return c=a.domUtils.clone(b,c),e(a.domUtils.getNodesByAttribute(b,c,"href"),"href"),e(a.domUtils.getNodesByAttribute(b,c,"src"),"src"),c},mergeOptions:function(a){var b;for(b in a)a.hasOwnProperty(b)&&(this.options[b]=a[b])},clearUpDom:function(b){var c,d;for(c=a.domUtils.getNodesByAttribute(b,b,"data-include"),d=c.length;d--;)a.domUtils.removeChild(b,c[d]);for(c=a.domUtils.getNodesByAttribute(b,b,"rootids"),d=c.length;d--;)a.domUtils.removeAttribute(b,c[d],"rootids")}},a.Parser.prototype.constructor=a.Parser,a}(a||{});a=function(a){return a.Parser&&(a.Parser.prototype.impliedRules=function(b,c,d,e){var f,g,h=this;if(d&&d.properties){if(!d.properties.name){f=this.getImpliedProperty(b,c,["img","area","abbr"],this.getNameAttr);var i=this.options.textFormat;"impliednametrimmed"===this.options.textFormat&&(i="whitespacetrimmed"),f?d.properties.name=[a.text.parseText(b,f,i)]:d.properties.name=[a.text.parse(b,c,i)]}d.properties.name&&d.value&&e.root.length>0&&1===e.properties.length&&(d=h.impliedValueRule(d,e.properties[0],"p-name",d.properties.name[0])),d.properties.photo||(f=this.getImpliedProperty(b,c,["img","object"],this.getPhotoAttr),f&&(f&&""!==f&&""!==this.options.baseUrl&&-1===f.indexOf(":")&&(f=a.domUtils.resolveUrl(b,f,this.options.baseUrl)),d.properties.photo=[a.utils.trim(f)])),d.properties.url||(f=this.getImpliedProperty(b,c,["a","area"],this.getURLAttr),f&&(f&&""!==f&&""!==this.options.baseUrl&&-1===f.indexOf(":")&&(f=a.domUtils.resolveUrl(b,f,this.options.baseUrl)),d.properties.url=[a.utils.trim(f)])),d.properties.url&&e&&1===e.root.length&&1===e.properties.length&&(d=h.impliedValueRule(d,e.properties[0],"u-url",d.properties.url[0]))}d.times.length>0&&d.dates.length>0&&(g=a.dates.dateTimeUnion(d.dates[0][1],d.times[0][1],this.options.dateFormat),d.properties[this.removePropPrefix(d.times[0][0])][0]=g.toString(this.options.dateFormat)),delete d.times,delete d.dates,null!==d.altValue&&(d.value=d.altValue.value),delete d.altValue},a.Parser.prototype.getImpliedProperty=function(b,c,d,e){var f,g,h=e(b,c);return h||(f=a.domUtils.isSingleDescendant(b,c,d),f&&this.hasHClass(b,f)===!1&&(h=e(b,f)),c.children.length>0&&(g=a.domUtils.isSingleDescendant(b,c),g&&(f=this.domUtils.isSingleDescendant(b,g,d),f&&this.hasHClass(b,f)===!1&&(h=e(b,f))))),h},a.Parser.prototype.getNameAttr=function(b,c){var d=a.domUtils.getAttrValFromTagList(b,c,["img","area"],"alt");return d||(d=a.domUtils.getAttrValFromTagList(b,c,["abbr"],"title")),d},a.Parser.prototype.getPhotoAttr=function(b,c){var d=a.domUtils.getAttrValFromTagList(b,c,["img"],"src");return d||a.domUtils.hasAttributeValue(b,c,"class","include")!==!1||(d=a.domUtils.getAttrValFromTagList(b,c,["object"],"data")),d},a.Parser.prototype.getURLAttr=function(b,c){var d=null;return a.domUtils.hasAttributeValue(b,c,"class","include")===!1&&(d=a.domUtils.getAttrValFromTagList(b,c,["a"],"href"),d||(d=a.domUtils.getAttrValFromTagList(b,c,["area"],"href"))),d},a.Parser.prototype.impliedValueRule=function(b,c,d,e){return b.value&&(a.utils.startWith(c,"p-")&&"p-name"===d&&(b.altValue={name:d,value:e}),a.utils.startWith(c,"e-")&&(b.altValue={name:d,value:e}),a.utils.startWith(c,"u-")&&(b.altValue={name:d,value:e})),b}),a}(a||{}),a=function(a){return a.utils={isString:function(a){return"string"==typeof a},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isArray:function(a){return a&&!a.propertyIsEnumerable("length")&&"object"==typeof a&&"number"==typeof a.length},startWith:function(a,b){return 0===a.indexOf(b)},trim:function(a){return a&&this.isString(a)?a.replace(/^\s+|\s+$/g,""):""},replaceCharAt:function(a,b,c){return a&&a.length>b?a.substr(0,b)+c+a.substr(b+c.length):a},trimWhitespace:function(a){if(a&&a.length){for(var b=a.length,c=0;b--&&this.isOnlyWhiteSpace(a[b]);)a=this.replaceCharAt(a,b," ");for(b=a.length;b>c&&this.isOnlyWhiteSpace(a[c]);)a=this.replaceCharAt(a,b," "),c++}return this.trim(a)},isOnlyWhiteSpace:function(a){return!/[^\t\n\r ]/.test(a)},removeWhiteSpace:function(a){return a.replace(/[\t\n\r ]+/g," ")},hasProperties:function(a){var b;for(b in a)if(a.hasOwnProperty(b))return!0;return!1},sortObjects:function(a,b){return b=b?-1:1,function(c,d){return c=c[a],d=d[a],d>c?-1*b:c>d?1*b:0}}},a}(a||{}),function(a){var b,c,d,e,f;if(a){try{d=!!(new a).parseFromString("","text/html")}catch(g){d=!1}if(!d){try{var h=document.implementation.createHTMLDocument("");h.documentElement.innerHTML="<title></title><div></div>",f=!0}catch(g){f=!1}if(!f)try{e=!!(new a).parseFromString("","text/xml")}catch(g){d=!1}a.prototype&&(f||e)&&(b=a.prototype,c=b.parseFromString,b.parseFromString=function(b,d){if(/^\s*text\/html\s*(?:;|$)/i.test(d)){var g,h,i;return f?(g=document.implementation.createHTMLDocument(""),h=g.documentElement,h.innerHTML=b,i=h.firstElementChild):e&&(/^<html.*html>$/i.test(b)||(b="<html>"+b+"</html>"),g=(new a).parseFromString(b,"text/xml"),h=g.documentElement,i=h.firstElementChild),1===h.childElementCount&&"html"===i.localName.toLowerCase()&&g.replaceChild(i,h),g}return c.apply(this,arguments)})}}}(DOMParser),a=function(a){return a.domUtils={innerHTML:function(a,b){return b.innerHTML},hasAttribute:function(a,b,c){return b.hasAttribute?b.hasAttribute(c):void 0},getAttribute:function(a,b,c){return b.getAttribute?b.getAttribute(c):void 0},setAttribute:function(a,b,c,d){b.setAttribute(c,d)},removeAttribute:function(a,b,c){b.removeAttribute(c)},getAttributeList:function(a,b,c){var d,e=[];return d=b.getAttribute(c),d&&""!==d&&(d.indexOf(" ")>-1?e=d.split(" "):e.push(d)),e},hasAttributeValue:function(a,b,c,d){var e=this.getAttributeList(a,b,c);return e.indexOf(d)>-1},getNodesByAttribute:function(a,b,c){var d="["+c+"]";return b.querySelectorAll(d)},getNodesByAttributeValue:function(a,b,c,d){var e,f=[],g=0,h=[];if(f=this.getNodesByAttribute(a,b,c))for(e=f.length;e>g;)this.hasAttributeValue(a,f[g],c,d)&&h.push(f[g]),g++;return h},getAttrValFromTagList:function(a,b,c,d){for(var e=c.length;e--;)if(b.tagName.toLowerCase()===c[e]){var f=this.getAttribute(a,b,d);if(f&&""!==f)return f}return null},isSingleDescendant:function(a,b,c){var d,e,f,g=0,h=null;for(e=0,f=b.children.length;f>e;)d=b.children[e],d.tagName&&(c&&this.hasTagName(a,d,c)&&(h=d),g++),e++;return 1===g&&h?h:null},isOnlySingleDescendantOfType:function(a,b,c){for(var d,e=b.children.length,f=0,g=null;e--;)d=b.children[e],1===d.nodeType&&this.hasTagName(a,d,c)&&(g=d,f++);return 1===f&&g?g:null},hasTagName:function(a,b,c){for(var d=c.length;d--;)if(b.tagName.toLowerCase()===c[d])return!0;return!1},appendChild:function(a,b,c){return b.appendChild(c)},removeChild:function(a,b){return b.parentNode?b.parentNode.removeChild(b):void 0},clone:function(a,b){var c=b.cloneNode(!0);return c.removeAttribute("id"),c},resolveUrl:function(b,c,d){if(a.utils.isString(c)){if(""!==c&&-1===c.indexOf(":")&&a.utils.isString(d)){var e=new DOMParser,f=e.parseFromString('<html><head><base href="'+d+'"><head><body><a href="'+c+'"></a></body></html>',"text/html");return f.getElementsByTagName("a")[0].href}return c}return""},getElementText:function(a){return a&&a.data?a.data:""},getOrderedAttributes:function(b){for(var c=b.outerHTML,d=[],e=0;e<b.attributes.length;e++){var f=b.attributes[e];f.indexNum=c.indexOf(f.name),d.push(f)}return d.sort(a.utils.sortObjects("indexNum"))},decodeEntities:function(a,b){return a.createTextNode(b).nodeValue}},a}(a||{}),a=function(a){return a.ISODate=function(a,b){this.clear(),this.format=b?b:"auto",this.setFormatSep(),arguments[0]&&this.parse(a,b)},a.ISODate.prototype={clear:function(){this.clearDate(),this.clearTime(),this.clearTimeZone(),this.setAutoProfileState()},clearDate:function(){this.dY=-1,this.dM=-1,this.dD=-1,this.dDDD=-1},clearTime:function(){this.tH=-1,this.tM=-1,this.tS=-1,this.tD=-1},clearTimeZone:function(){this.tzH=-1,this.tzM=-1,this.tzPN="+",this.z=!1},setAutoProfileState:function(){this.autoProfile={sep:"T",dsep:"-",tsep:":",tzsep:":",tzZulu:"Z"}},parse:function(a,b){this.clear();var c=[],d=[],e=0,f="",g="",h="";return b&&(this.format=b),a.indexOf("t")>-1&&(this.autoProfile.sep="t"),a.indexOf("z")>-1&&(this.autoProfile.tzZulu="z"),a.indexOf("Z")>-1&&(this.autoProfile.tzZulu="Z"),-1===a.toUpperCase().indexOf("T")&&(this.autoProfile.sep=" "),a=a.toUpperCase().replace(" ","T"),a.indexOf("T")>-1?(c=a.split("T"),f=c[0],g=c[1],g.indexOf("Z")>-1&&(this.z=!0),(g.indexOf("+")>-1||g.indexOf("-")>-1)&&(d=g.split("Z"),g=d[0],h=d[1],(g.indexOf("+")>-1||g.indexOf("-")>-1)&&(e=0,e=g.indexOf("+")>-1?g.indexOf("+"):g.indexOf("-"),h=g.substring(e,g.length),g=g.substring(0,e)))):f=a,""!==f&&(this.parseDate(f),""!==g&&(this.parseTime(g),""!==h&&this.parseTimeZone(h))),this.toString(b)},parseDate:function(a,b){this.clearDate();var c=[];return-1===a.indexOf("-")&&(this.autoProfile.tsep=""),c=a.match(/(\d\d\d\d)-(\d\d\d)/),c&&(c[1]&&(this.dY=c[1]),c[2]&&(this.dDDD=c[2])),-1===this.dDDD&&(c=a.match(/(\d\d\d\d)?-?(\d\d)?-?(\d\d)?/),c[1]&&(this.dY=c[1]),c[2]&&(this.dM=c[2]),c[3]&&(this.dD=c[3])),this.toString(b)},parseTime:function(a,b){this.clearTime();var c=[];return-1===a.indexOf(":")&&(this.autoProfile.tsep=""),c=a.match(/(\d\d)?:?(\d\d)?:?(\d\d)?.?([0-9]+)?/),c[1]&&(this.tH=c[1]),c[2]&&(this.tM=c[2]),c[3]&&(this.tS=c[3]),c[4]&&(this.tD=c[4]),this.toTimeString(b)},parseTimeZone:function(a,b){this.clearTimeZone();var c=[];return"z"===a.toLowerCase()?(this.z=!0,this.autoProfile.tzZulu="z"===a?"z":"Z"):(-1===a.indexOf(":")&&(this.autoProfile.tzsep=""),c=a.match(/([\-\+]{1})?(\d\d)?:?(\d\d)?/),c[1]&&(this.tzPN=c[1]),c[2]&&(this.tzH=c[2]),c[3]&&(this.tzM=c[3])),this.tzZulu="z",this.toTimeString(b)},toString:function(a){var b="";return a&&(this.format=a),this.setFormatSep(),this.dY>-1?(b=this.dY,this.dM>0&&this.dM<13&&(b+=this.dsep+this.dM,this.dD>0&&this.dD<32&&(b+=this.dsep+this.dD,this.tH>-1&&this.tH<25&&(b+=this.sep+this.toTimeString(a)))),this.dDDD>-1&&(b+=this.dsep+this.dDDD)):this.tH>-1&&(b+=this.toTimeString(a)),b},toTimeString:function(a){var b="";return a&&(this.format=a),this.setFormatSep(),this.tH&&this.tH>-1&&this.tH<25&&(b+=this.tH,this.tM>-1&&this.tM<61&&(b+=this.tsep+this.tM,this.tS>-1&&this.tS<61&&(b+=this.tsep+this.tS,this.tD>-1&&(b+="."+this.tD))),this.z?b+=this.tzZulu:this.tzH&&this.tzH>-1&&this.tzH<25&&(b+=this.tzPN+this.tzH,this.tzM>-1&&this.tzM<61&&(b+=this.tzsep+this.tzM))),b},setFormatSep:function(){switch(this.format.toLowerCase()){case"rfc3339":this.sep="T",this.dsep="",this.tsep="",this.tzsep="",this.tzZulu="Z";break;case"w3c":this.sep="T",this.dsep="-",this.tsep=":",this.tzsep=":",this.tzZulu="Z";break;case"html5":this.sep=" ",this.dsep="-",this.tsep=":",this.tzsep=":",this.tzZulu="Z";break;default:this.sep=this.autoProfile.sep,this.dsep=this.autoProfile.dsep,this.tsep=this.autoProfile.tsep,this.tzsep=this.autoProfile.tzsep,this.tzZulu=this.autoProfile.tzZulu}},hasFullDate:function(){return-1!==this.dY&&-1!==this.dM&&-1!==this.dD},hasDate:function(){return-1!==this.dY},hasTime:function(){return-1!==this.tH},hasTimeZone:function(){return-1!==this.tzH}},a.ISODate.prototype.constructor=a.ISODate,a}(a||{}),a=function(a){return a.dates={hasAM:function(a){return a=a.toLowerCase(),a.indexOf("am")>-1||a.indexOf("a.m.")>-1},hasPM:function(a){return a=a.toLowerCase(),a.indexOf("pm")>-1||a.indexOf("p.m.")>-1},removeAMPM:function(a){return a.replace("pm","").replace("p.m.","").replace("am","").replace("a.m.","")},isDuration:function(b){return a.utils.isString(b)&&(b=b.toLowerCase(),a.utils.startWith(b,"p"))?!0:!1},isTime:function(b){if(a.utils.isString(b)){if(b=b.toLowerCase(),b=a.utils.trim(b),b.match(":")&&(a.utils.startWith(b,"z")||a.utils.startWith(b,"-")||a.utils.startWith(b,"+")))return!0;if(b.match(/^[0-9]/)&&(this.hasAM(b)||this.hasPM(b)))return!0;if(b.match(":")&&!b.match(/t|\s/))return!0;if(a.utils.isNumber(b)&&(2===b.length||4===b.length||6===b.length))return!0}return!1},parseAmPmTime:function(b){var c=b,d=[];return a.utils.isString(c)&&(b=b.toLowerCase(),b=b.replace(/[ ]+/g,""),(b.match(":")||this.hasAM(b)||this.hasPM(b))&&(b.match(":")?d=b.split(":"):(d[0]=b,d[0]=this.removeAMPM(d[0])),this.hasPM(b)&&d[0]<12&&(d[0]=parseInt(d[0],10)+12),d[0]&&1===d[0].length&&(d[0]="0"+d[0]),d[0]&&(b=d.join(":")))),this.removeAMPM(b)},dateTimeUnion:function(b,c,d){var e=new a.ISODate(b,d),f=new a.ISODate;return f.parseTime(this.parseAmPmTime(c)),e.hasFullDate()&&f.hasTime()?(e.tH=f.tH,e.tM=f.tM,e.tS=f.tS,e.tD=f.tD,e):e.hasFullDate()?e:new a.ISODate},concatFragments:function(b,c){var d=new a.ISODate,e=0,f="";if(b[0].toUpperCase().match("T"))return new a.ISODate(b[0],c);for(e=0;e<b.length;e++){if(f=b[e],"-"===f.charAt(4)&&d.hasFullDate()===!1&&d.parseDate(f),(f.indexOf(":")>-1||a.utils.isNumber(this.parseAmPmTime(f)))&&d.hasTime()===!1){var g=this.splitTimeAndZone(f);f=g[0],f=this.parseAmPmTime(f),d.parseTime(f),g.length>1&&d.parseTimeZone(g[1])}("-"===f.charAt(0)||"+"===f.charAt(0)||"Z"===f.toUpperCase())&&d.hasTimeZone()===!1&&d.parseTimeZone(f)}return d},splitTimeAndZone:function(a){for(var b=[a],c=["-","+","z","Z"],d=c.length;d--;)if(a.indexOf(c[d])>-1){b[0]=a.slice(0,a.indexOf(c[d])),b.push(a.slice(a.indexOf(c[d])));break}return b}},a}(a||{}),a=function(a){return a.text={textFormat:"whitespacetrimmed",blockLevelTags:["h1","h2","h3","h4","h5","h6","p","hr","pre","table","address","article","aside","blockquote","caption","col","colgroup","dd","div","dt","dir","fieldset","figcaption","figure","footer","form","header","hgroup","hr","li","map","menu","nav","optgroup","option","section","tbody","testarea","tfoot","th","thead","tr","td","ul","ol","dl","details"],excludeTags:["noframe","noscript","script","style","frames","frameset"],parse:function(a,b,c){var d;return this.textFormat=c?c:this.textFormat,"normalised"===this.textFormat?(d=this.walkTreeForText(b),void 0!==d?this.normalise(a,d):""):this.textContent(a,b.textContent,this.textFormat)},parseText:function(a,b,c){var d=document.createElement("div");return d.innerHTML=b,this.parse(a,d,c)},textContent:function(b,c,d){if(this.textFormat=d?d:this.textFormat,c){var e="",f=/(<([^>]+)>)/gi;return e=c.replace(f,""),"whitespacetrimmed"===this.textFormat&&(e=a.utils.trimWhitespace(e)),a.domUtils.decodeEntities(b,e)}return""},normalise:function(b,c){return c=c.replace(/&nbsp;/g," "),c=a.utils.removeWhiteSpace(c),c=a.domUtils.decodeEntities(b,c),c=c.replace("â€“","-"),a.utils.trim(c)},walkTreeForText:function(b){var c="",d=0;if(b.tagName&&this.excludeTags.indexOf(b.tagName.toLowerCase())>-1)return c;if(b.nodeType&&3===b.nodeType&&(c+=a.domUtils.getElementText(b)),b.childNodes&&b.childNodes.length>0)for(d=0;d<b.childNodes.length;d++){var e=this.walkTreeForText(b.childNodes[d]);void 0!==e&&(c+=e)}return b.tagName&&-1!==this.blockLevelTags.indexOf(b.tagName.toLowerCase())&&(c+=" "),""===c?void 0:c}},a}(a||{}),a=function(a){return a.html={selfClosingElt:["area","base","br","col","hr","img","input","link","meta","param","command","keygen","source"],parse:function(a,b){var c="",d=0;if(b.childNodes&&b.childNodes.length>0)for(d=0;d<b.childNodes.length;d++){var e=this.walkTreeForHtml(a,b.childNodes[d]);void 0!==e&&(c+=e)}return c},walkTreeForHtml:function(b,c){var d="",e=0;if(c.nodeType&&3===c.nodeType&&(d+=a.domUtils.getElementText(c)),c.nodeType&&1===c.nodeType&&a.domUtils.hasAttribute(b,c,"data-include")===!1){d+="<"+c.tagName.toLowerCase();var f=a.domUtils.getOrderedAttributes(c);for(e=0;e<f.length;e++)d+=" "+f[e].name+'="'+f[e].value+'"';if(-1===this.selfClosingElt.indexOf(c.tagName.toLowerCase())&&(d+=">"),c.childNodes&&c.childNodes.length>0)for(e=0;e<c.childNodes.length;e++){var g=this.walkTreeForHtml(b,c.childNodes[e]);void 0!==g&&(d+=g)}d+=this.selfClosingElt.indexOf(c.tagName.toLowerCase())>-1?" />":"</"+c.tagName.toLowerCase()+">"}return""===d?void 0:d}},a}(a||{}),a=function(a){return a.maps=a.maps?a.maps:{},a.maps["h-adr"]={root:"adr",name:"h-adr",properties:{"post-office-box":{},"street-address":{},"extended-address":{},locality:{},region:{},"postal-code":{},"country-name":{}}},a}(a||{}),a=function(a){return a.maps=a.maps?a.maps:{},a.maps["h-card"]={root:"vcard",name:"h-card",properties:{fn:{map:"p-name"},adr:{uf:["h-adr"]},agent:{uf:["h-card"]},bday:{map:"dt-bday"},"class":{},category:{map:"p-category",relAlt:["tag"]},email:{map:"u-email"},geo:{map:"p-geo",uf:["h-geo"]},key:{},label:{},logo:{map:"u-logo"},mailer:{},"honorific-prefix":{},"given-name":{},"additional-name":{},"family-name":{},"honorific-suffix":{},nickname:{},note:{},org:{},"p-organization-name":{},"p-organization-unit":{},photo:{map:"u-photo"},rev:{map:"dt-rev"},role:{},sequence:{},"sort-string":{},sound:{map:"u-sound"},title:{},tel:{},tz:{},uid:{map:"u-uid"},url:{map:"u-url"}}},a}(a||{}),a=function(a){return a.maps=a.maps?a.maps:{},a.maps["h-entry"]={root:"hentry",name:"h-entry",properties:{"entry-title":{map:"p-name"},"entry-summary":{map:"p-summary"},"entry-content":{map:"e-content"},published:{map:"dt-published"},updated:{map:"dt-updated"},author:{uf:["h-card"]},category:{map:"p-category",relAlt:["tag"]},geo:{map:"p-geo",uf:["h-geo"]},latitude:{},longitude:{},url:{map:"u-url",relAlt:["bookmark"]}}},a}(a||{}),a=function(a){return a.maps=a.maps?a.maps:{},a.maps["h-event"]={root:"vevent",name:"h-event",properties:{summary:{map:"p-name"},dtstart:{map:"dt-start"},dtend:{map:"dt-end"},description:{},url:{map:"u-url"},category:{map:"p-category",relAlt:["tag"]},location:{uf:["h-card"]},geo:{uf:["h-geo"]},latitude:{},longitude:{},duration:{map:"dt-duration"},contact:{uf:["h-card"]},organizer:{uf:["h-card"]},attendee:{uf:["h-card"]},uid:{map:"u-uid"},attach:{map:"u-attach"},status:{},rdate:{},rrule:{}}},a}(a||{}),a=function(a){return a.maps=a.maps?a.maps:{},a.maps["h-geo"]={root:"geo",name:"h-geo",properties:{latitude:{},longitude:{}}},a}(a||{}),a=function(a){return a.maps=a.maps?a.maps:{},a.maps["h-item"]={root:"item",name:"h-item",subTree:!1,properties:{fn:{map:"p-name"},url:{map:"u-url"},photo:{map:"u-photo"}}},a}(a||{}),a=function(a){return a.maps=a.maps?a.maps:{},a.maps["h-listing"]={root:"hlisting",name:"h-listing",properties:{version:{},lister:{uf:["h-card"]},dtlisted:{map:"dt-listed"},dtexpired:{map:"dt-expired"},location:{},price:{},item:{uf:["h-card","a-adr","h-geo"]},summary:{map:"p-name"},description:{map:"e-description"},listing:{}}},a}(a||{}),a=function(a){return a.maps=a.maps?a.maps:{},a.maps["h-news"]={root:"hnews",name:"h-news",properties:{entry:{uf:["h-entry"]},geo:{uf:["h-geo"]},latitude:{},longitude:{},"source-org":{uf:["h-card"]},dateline:{uf:["h-card"]},"item-license":{map:"u-item-license"},principles:{map:"u-principles",relAlt:["principles"]}}},a}(a||{}),a=function(a){return a.maps=a.maps?a.maps:{},a.maps["h-org"]={root:"h-x-org",name:"h-org",properties:{"organization-name":{},"organization-unit":{}
}},a}(a||{}),a=function(a){return a.maps=a.maps?a.maps:{},a.maps["h-product"]={root:"hproduct",name:"h-product",properties:{brand:{uf:["h-card"]},category:{map:"p-category",relAlt:["tag"]},price:{},description:{map:"e-description"},fn:{map:"p-name"},photo:{map:"u-photo"},url:{map:"u-url"},review:{uf:["h-review","h-review-aggregate"]},listing:{uf:["h-listing"]},identifier:{map:"u-identifier"}}},a}(a||{}),a=function(a){return a.maps=a.maps?a.maps:{},a.maps["h-recipe"]={root:"hrecipe",name:"h-recipe",properties:{fn:{map:"p-name"},ingredient:{map:"e-ingredient"},"yield":{},instructions:{map:"e-instructions"},duration:{map:"dt-duration"},photo:{map:"u-photo"},summary:{},author:{uf:["h-card"]},published:{map:"dt-published"},nutrition:{},tag:{}}},a}(a||{}),a=function(a){return a.maps=a.maps?a.maps:{},a.maps["h-resume"]={root:"hresume",name:"h-resume",properties:{summary:{},contact:{uf:["h-card"]},education:{uf:["h-card","h-event"]},experience:{uf:["h-card","h-event"]},skill:{},affiliation:{uf:["h-card"]}}},a}(a||{}),a=function(a){return a.maps=a.maps?a.maps:{},a.maps["h-review-aggregate"]={root:"hreview-aggregate",name:"h-review-aggregate",properties:{summary:{map:"p-name"},item:{map:"p-item",uf:["h-item","h-geo","h-adr","h-card","h-event","h-product"]},rating:{},average:{},best:{},worst:{},count:{},votes:{},category:{map:"p-category",relAlt:["tag"]},url:{map:"u-url",relAlt:["self","bookmark"]}}},a}(a||{}),a=function(a){return a.maps=a.maps?a.maps:{},a.maps["h-review"]={root:"hreview",name:"h-review",properties:{summary:{map:"p-name"},description:{map:"e-description"},item:{map:"p-item",uf:["h-item","h-geo","h-adr","h-card","h-event","h-product"]},reviewer:{uf:["h-card"]},dtreviewer:{map:"dt-reviewer"},rating:{},best:{},worst:{},category:{map:"p-category",relAlt:["tag"]},url:{map:"u-url",relAlt:["self","bookmark"]}}},a}(a||{}),a=function(a){return a.rels={friend:["yes","external"],acquaintance:["yes","external"],contact:["yes","external"],met:["yes","external"],"co-worker":["yes","external"],colleague:["yes","external"],"co-resident":["yes","external"],neighbor:["yes","external"],child:["yes","external"],parent:["yes","external"],sibling:["yes","external"],spouse:["yes","external"],kin:["yes","external"],muse:["yes","external"],crush:["yes","external"],date:["yes","external"],sweetheart:["yes","external"],me:["yes","external"],license:["yes","yes"],nofollow:["no","external"],tag:["no","yes"],self:["no","external"],bookmark:["no","external"],author:["no","external"],home:["no","external"],directory:["no","external"],enclosure:["no","external"],pronunciation:["no","external"],payment:["no","external"],principles:["no","external"]},a}(a||{});var b={};return b.get=function(b){var c,d,e;return d=b&&b.document?b.document:document,e=b&&b.node?b.node:d,b=b?b:{},!b.baseUrl&&d&&d.location&&(b.baseUrl=d.location.href),c=new a.Parser,c.get(d,e,b)},b});
//# sourceMappingURL=microformat-shiv.min.js.map